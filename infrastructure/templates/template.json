{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "type": "Microsoft.App/containerApps",
  "apiVersion": "2022-03-01",
  "name": "eesdev-frontend",
  "location": "uksouth",
  "tags": {
    "tagName1": "ees",
    "tagName2": "container"
  },
  "properties": {
    "configuration": {
      "activeRevisionsMode": "single",
      // "dapr": {
      //   "appId": "TODO", // Dapr App ID
      //   "appPort": "3000", // Tells Dapr which port your application is listening on
      //   "appProtocol": "http", // Tells Dapr which protocol your application is using. Valid options are http and grpc. Default is http
      //   "enabled": true // Boolean indicating if the Dapr side car is enabled
      // },
      "ingress": {
        "allowInsecure": false,
        "external": true,
        "targetPort": 3000,
        "traffic": [
          {
            "label": "test",
            "latestRevision": true,
            "revisionName": "latest",
            "weight": 100
          }
        ],
        "transport": "http"
      }
      // "registries": [
      //   {
      //     "identity": "string",
      //     "passwordSecretRef": "string",
      //     "server": "string",
      //     "username": "string"
      //   }
      // ],
      // "secrets": [
      //   {
      //     "name": "string",
      //     "value": "string"
      //   }
      // ]
    },
    "managedEnvironmentId": "string", // Resource ID of the Container App's environment.
    "template": {
      "containers": [
        {
          // "args": [ "string" ],
          // "command": [ "string" ],
          // "env": [
          //   {
          //     "name": "string",
          //     "secretRef": "string",
          //     "value": "string"
          //   }
          // ],
          "image": "string", // container image tag (e.g. myregistry.azurecr.io/myimage:latest)
          "name": "string", // custom name for container (e.g. frontend)
          "probes": [
            {
              "httpGet": {
                "host": "3000",
                // "httpHeaders": [
                //   {
                //     "name": "string",
                //     "value": "string"
                //   }
                // ],
                "path": "/",
                "port": 3000,
                "scheme": "http"
              },
              "initialDelaySeconds": 10, // number of seconds after the container has started before liveness probes are initiated
              "successThreshold": 1,
              "tcpSocket": {
                "port": 3000
              },
              "type": "Readiness" // Liveness or Readiness (Liveness is used to determine if the container is running, Readiness is used to determine if the container is ready to serve traffic)
            }
          ],
          "resources": {
            "cpu": "[json('0.5')]",
            "memory": "250mb"
          }
          // "volumeMounts": [
          //   {
          //     "mountPath": "string",
          //     "volumeName": "string"
          //   }
          // ]
        }
      ],
      "revisionSuffix": "latest",
      "scale": {
        "maxReplicas": 2,
        "minReplicas": 1
        // "rules": [
        //   {
        //     "azureQueue": {
        //       "auth": [
        //         {
        //           "secretRef": "string",
        //           "triggerParameter": "string"
        //         }
        //       ],
        //       "queueLength": "int",
        //       "queueName": "string"
        //     },
        //     "custom": {
        //       "auth": [
        //         {
        //           "secretRef": "string",
        //           "triggerParameter": "string"
        //         }
        //       ],
        //       "metadata": {},
        //       "type": "string"
        //     },
        //     "http": {
        //       "auth": [
        //         {
        //           "secretRef": "string",
        //           "triggerParameter": "string"
        //         }
        //       ],
        //       "metadata": {}
        //     },
        //     "name": "string"
        //   }
        // ]
      }
      // "volumes": [  
      //   {
      //     "name": "string",
      //     "storageName": "string",
      //     "storageType": "string"
      //   }
      // ]
    }
  }
}
